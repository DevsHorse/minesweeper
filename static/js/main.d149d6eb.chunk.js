(this["webpackJsonpminer-game"]=this["webpackJsonpminer-game"]||[]).push([[0],{15:function(e,t,a){e.exports=a(28)},20:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(13),l=a.n(i),r=(a(20),a(2)),c=a(3),o=a(5),h=a(4),m=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this)).handleChoose=function(e){var t=/[0-9]{1,2}/g,a=e.target.textContent.match(/^([0-9]{1,2}x[0-9]{1,2})\s/)[0],n=a.match(t)[0],i=a.match(t)[1];s.props.handleGameStatus({width:n,height:i})},s.componentDidMount=function(){s.props.isRestart&&s.props.handleGameStatus({width:s.props.isRestart.width,height:s.props.isRestart.height})},s}return Object(c.a)(a,[{key:"render",value:function(){var e="light"===this.props.theme.currentTheme?"":"game-difficult-dark";return n.a.createElement("div",{className:"container game-difficult-container"},n.a.createElement("div",{className:"start-menu"},n.a.createElement("div",{className:"game-difficult ".concat(e),onClick:this.handleChoose},n.a.createElement("div",null,"8x8 "),n.a.createElement("div",{className:"game-difficult-mines"},"10 ",n.a.createElement("span",{className:"game-difficult-mines-span"},"mines"))),n.a.createElement("div",{className:"game-difficult ".concat(e),onClick:this.handleChoose},n.a.createElement("div",null,"16x16 "),n.a.createElement("div",{className:"game-difficult-mines"},"40 ",n.a.createElement("span",{className:"game-difficult-mines-span"},"mines"))),n.a.createElement("div",{className:"game-difficult ".concat(e),onClick:this.handleChoose},n.a.createElement("div",null,"30x16 "),n.a.createElement("div",{className:"game-difficult-mines"},"99 ",n.a.createElement("span",{className:"game-difficult-mines-span"},"mines"))),n.a.createElement("div",{className:"game-difficult ".concat(e)},"soon...")))}}]),a}(n.a.Component),d=a(8),p=a(6),u=a(7),f=a(9),g=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this)).handleClick=function(e){e.preventDefault(),s.props.cellOptions.opened||s.props.isGameOver||("click"===e.type?s.props.handleClick(s.props.cellOptions.id,"click"):"contextmenu"===e.type&&s.props.handleClick(s.props.cellOptions.id,"contextmenu"))},s.bgColors=["#DEDEDC","#DDFAC3","#ECEDBF","#EDDAB4","#EDC38A","#F7A1A2","#FEA785","#FF7D60","#FF323C"],s}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.cellOptions.mined,t=this.props.cellOptions.opened,a=this.props.cellOptions.minesAround,s=this.props.cellOptions.flagged,i=this.props.styleOptions.width<40?"30px":this.props.styleOptions.width<50?"40px":"70px",l=this.props.theme.currentTheme,r="light"===l?"#BABDB6":"#777776",c=e?"red":t?this.bgColors[a]:r,o=this.props.cellOptions.loss?"red":"#666",h=t?a>0||"light"===l?this.bgColors[a]:"#cecece":r,m=e&&t?o:h,d=Object(p.a)(Object(p.a)({},this.props.styleOptions),{},{backgroundColor:this.props.cheatOn?c:m}),g=e?n.a.createElement(u.a,{icon:f.b,style:{fontSize:"".concat(this.props.styleOptions.width),textAlign:"center",width:"100%"}}):"",v=a>0?a:g,O=this.props.cellOptions.opened?"":"light"===l?"cell-closed":"cell-closed cell-closed-dark",b="light"===l?"flag":"flag-dark",C=s?n.a.createElement(u.a,{className:b,icon:f.a,style:{fontSize:"".concat(this.props.styleOptions.width),textAlign:"center",width:"100%"}}):null,k=t?v:C,E="light"===this.props.theme.currentTheme?"cell":"cell-dark";return console.log(this.bgColors[0]),n.a.createElement("div",{className:E,style:d,onClick:this.handleClick,onContextMenu:this.handleClick},n.a.createElement("div",{className:"cell-content ".concat(O),style:{fontSize:"".concat(i)}},k))}}]),a}(n.a.Component),v=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this)).getCell=function(){for(var e=[],t=0,a=Object.keys(s.props.gameState.cells);t<a.length;t++){var i=a[t];e.push(n.a.createElement(g,{key:i,cellOptions:s.props.gameState.cells[i],isGameOver:s.props.gameOver,styleOptions:{width:s.props.gameState.cellSize,height:s.props.gameState.cellSize},handleClick:s.props.handleClick,cheatOn:s.props.cheatOn,theme:s.props.theme}))}return e},s}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.gameOver?n.a.createElement("div",{className:"game-over-or-won"},"Game Over"):null,t=this.props.gameWon?n.a.createElement("div",{className:"game-over-or-won"},"You won! ",n.a.createElement("br",null),"Time: ",this.props.score):null,a=this.props.pause?n.a.createElement("div",{className:"game-pause"},"Pause"):null,s="light"===this.props.theme.currentTheme?"":"board-dark";return n.a.createElement("div",{className:"board ".concat(s),style:{minWidth:this.props.gameState.boardWidth}},this.getCell(),e,t,a)}}]),a}(n.a.Component),O=a(14),b=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this)).handleDificult=function(e){e.preventDefault(),s.props.handleGameStatus({},!1)},s.handlePause=function(){if(s.state.init)s.props.handlePause(!0),s.setState({init:!1});else{var e=(new Date).getTime()-s.state.startTime-s.state.timePassed;s.props.handlePause(!1),s.setState({startTime:s.state.startTime+e,init:!0})}},s.componentDidUpdate=function(){s.props.gameWon&&!s.props.score&&s.props.handleWonScore(s.state.time)},s.getFlagsCounter=function(){var e=s.props.flags.set,t=s.props.flags.all;return"".concat(e,"/").concat(t)},s.handleCheat=function(e){e.preventDefault(),"111"===prompt("Password: ","")&&s.props.handleCheat()},s.handleTheme=function(e){var t=e.target.textContent.match(/^[\w]+/g)[0].trim();s.props.theme&&s.props.theme.handleTheme(t)},s.state={startTime:(new Date).getTime(),timePassed:"",time:"00:00",init:!0},s}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this;this.state.init&&this.props.gameInit?e=setTimeout((function(){var e=(new Date).getTime(),a=Math.floor((e-t.state.startTime)/1e3),s=a%60,n=Math.floor(a/60);t.setState({timePassed:e-t.state.startTime,time:(n<10?"0":"")+n+":"+(s<10?"0":"")+s})}),1e3):clearInterval(e),(this.props.gameOver||this.props.gameWon)&&clearInterval(e);var a="";a=this.props.theme&&"light"===this.props.theme.currentTheme?"dark":"light";var s=this.props.theme.currentTheme,i="light"===s?"":"header-block-dark",l="light"===s?"":"menu-btn-dark";return n.a.createElement("div",{className:"aside-menu"},n.a.createElement("div",{className:"menu-header"},n.a.createElement("div",{className:"header-block ".concat(i)},n.a.createElement(u.a,{icon:f.a,style:{fontSize:"30px"}}),n.a.createElement("div",null,this.getFlagsCounter())),n.a.createElement("div",{className:"header-block ".concat(i)},n.a.createElement(u.a,{icon:O.a,style:{fontSize:"30px"}}),n.a.createElement("div",null,this.state.time))),n.a.createElement("div",null,n.a.createElement("button",{className:"menu-btn ".concat(l),onClick:this.handleCheat},"Cheat for test")),n.a.createElement("div",null,n.a.createElement("button",{className:"menu-btn ".concat(l),onClick:this.handleTheme},a," theme")),n.a.createElement("div",{className:"menu-footer"},n.a.createElement("button",{className:"menu-btn ".concat(l),onClick:this.props.restartGame},"Restart"),n.a.createElement("button",{className:"menu-btn ".concat(l),onClick:this.handleDificult},"Change difficult"),n.a.createElement("button",{className:"menu-btn ".concat(l),onClick:this.handlePause},"Pause")))}}]),a}(n.a.Component),C=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this)).state={boardWidth:0,cellSize:0,gameOver:!1,gameWon:!1,gameInit:!1,cheatOn:!1,pause:!1,score:"",idInitCell:"",flags:{set:0,all:0},cells:{},mines:{}},s.handleClick=function(e,t){if(s.state.gameInit){if(!s.state.gameOver){var a=s.state.cells[e];if("contextmenu"!==t){if(!a.opened&&!a.flagged)if(a.mined)s.handleGameOver(e);else if(a.opened=!0,!a.minesAround>0)for(var n=s.getMinesOrCellsAround(s.state.cells,a.id,s.state.mines,"cells"),i=0;i<n.length;i++){var l=n[i];s.state.cells[l].flagged||s.state.cells[l].opened||s.handleClick(l,"click")}s.setState({cells:Object(p.a)(Object(p.a)({},s.state.cells),{},Object(d.a)({},e,a))})}else s.handleRightClick(e)}}else s.gameInit(e)},s.handleRightClick=function(e){var t=s.state.cells[e];if(!s.state.gameOver&&!t.opened){var a=Object(p.a)({},s.state.flags);if(!t.flagged&&s.state.flags.set<s.state.flags.all)t.flagged=!0,a.set+=1;else{if(!t.flagged)return;t.flagged=!1,a.set-=1}s.setState({cells:Object(p.a)(Object(p.a)({},s.state.cells),{},Object(d.a)({},e,t)),flags:a})}},s.handleGameOver=function(e){for(var t={},a=0,n=Object.keys(s.state.cells);a<n.length;a++){var i=n[a];s.state.cells[i].mined&&(t[i]=s.state.cells[i],t[i].opened=!0,e===i&&(t[i].loss=!0))}s.setState({cells:Object(p.a)(Object(p.a)({},s.state.cells),t),gameOver:!0})},s.handleWon=function(){for(var e=0,t=0,a=Object.keys(s.state.cells);t<a.length;t++){var n=a[t];s.state.cells[n].opened||e++}e-s.state.flags.all===0&&s.setState({gameWon:!0})},s.initBoard=function(){var e=s.getBoardAndCellSize(),t=e.boardWidth,a=s.getCells({});s.setState({boardWidth:t,cellSize:e.cellSize,cells:a})},s.gameInit=function(e){for(var t=s.getRandomMines(e),a=s.getCells(t,e),n=Object.keys(t).length,i=0,l=Object.keys(a);i<l.length;i++){var r=l[i];if(!a[r].mined){var c=s.getMinesOrCellsAround(a,r,t,"mines");a[r].minesAround=c}}s.setState({cells:a,gameInit:!0,idInitCell:e,flags:{set:0,all:n},mines:t})},s.getMinesOrCellsAround=function(e,t,a,n){var i=e[t].row,l=e[t].col,r=[l+1+"/"+i,l-1+"/"+i,l+"/"+(i+1),l+"/"+(i-1),l+1+"/"+(i+1),l-1+"/"+(i-1),l+1+"/"+(i-1),l-1+"/"+(i+1)],c=0,o=[];return r=r.forEach((function(e){var t=new RegExp("^(0/)|(/0)|(".concat(+s.props.gameDifficult.width+1,"/)|(/").concat(+s.props.gameDifficult.height+1,")"),"g");if(e.match(t)){if("mines"!==n)return;c=c}else"mines"===n?c=a[e]?c+=1:c:o.push(e)})),"mines"===n?c:o},s.handleCheat=function(){s.setState({cheatOn:!0})},s.handleWonScore=function(e){s.setState({score:e})},s.restartGame=function(e){e.preventDefault(),s.props.handleGameStatus({},!1,{width:s.props.gameDifficult.width,height:s.props.gameDifficult.height})},s.handlePause=function(e){s.setState({pause:e})},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){0===this.state.boardWidth&&this.initBoard()}},{key:"componentDidUpdate",value:function(){this.state.idInitCell&&!1===this.state.cells[this.state.idInitCell].opened&&this.handleClick(this.state.idInitCell,"click"),this.state.flags.all&&this.state.flags.set===this.state.flags.all&&!this.state.gameWon&&this.handleWon()}},{key:"getBoardAndCellSize",value:function(){var e=90;return"16"===this.props.gameDifficult.width?e=45:"30"===this.props.gameDifficult.width&&(e=35),{cellSize:e,boardWidth:+this.props.gameDifficult.width*e+2*this.props.gameDifficult.width}}},{key:"getRandomMines",value:function(e){var t=this,a=function(e){return"col"===e?Math.floor(Math.random()*t.props.gameDifficult.width+1):"row"===e?Math.floor(Math.random()*t.props.gameDifficult.height+1):void 0},s=0;"8"===this.props.gameDifficult.width?s=10:"16"===this.props.gameDifficult.width?s=40:"30"===this.props.gameDifficult.width&&(s=99);for(var n=/[0-9]{1,2}/g,i=+e.match(n)[1],l=+e.match(n)[0],r=Object.fromEntries([[l+1+"/"+i,!0],[l-1+"/"+i,!0],[l+"/"+(i+1),!0],[l+"/"+(i-1),!0],[l+1+"/"+(i+1),!0],[l-1+"/"+(i-1),!0],[l+1+"/"+(i-1),!0],[l-1+"/"+(i+1),!0],[l+"/"+i,!0]]),c={},o=1;o<=s;o++){for(var h=a("col"),m=a("row");c[h+"/"+m]||r[h+"/"+m];)h=a("col"),m=a("row");c[h+"/"+m]=!0}return c}},{key:"getCells",value:function(e,t){for(var a={},s=1;s<=this.props.gameDifficult.height;s++)for(var n=1;n<=this.props.gameDifficult.width;n++){var i=!!e[n+"/"+s];a[n+"/"+s]={id:n+"/"+s,row:s,col:n,mined:i,opened:!1,flagged:!1,minesAround:0,loss:!1}}return a}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(v,{gameState:this.state,handleClick:this.handleClick,gameOver:this.state.gameOver,cheatOn:this.state.cheatOn,gameWon:this.state.gameWon,score:this.state.score,pause:this.state.pause,theme:this.props.theme}),n.a.createElement(b,{handleGameStatus:this.props.handleGameStatus,gameOver:this.state.gameOver,gameWon:this.state.gameWon,gameInit:this.state.gameInit,flags:this.state.flags,handleCheat:this.handleCheat,handleWonScore:this.handleWonScore,score:this.state.score,restartGame:this.restartGame,handlePause:this.handlePause,theme:this.props.theme}))}}]),a}(n.a.Component),k=(a(26),a(27),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={gameDifficult:{width:"",height:""},isStartGame:!1,theme:"light",isRestart:null},e.handleGameStatus=function(t,a,s){e.setState({gameDifficult:{width:t.width?t.width:"",height:t.height?t.height:""},isStartGame:!1!==a||a,isRestart:s||null})},e.handleTheme=function(t){e.setState({theme:t})},e}return Object(c.a)(a,[{key:"render",value:function(){var e={currentTheme:this.state.theme,handleTheme:this.handleTheme},t=this.state.isStartGame?n.a.createElement(C,{handleGameStatus:this.handleGameStatus,gameDifficult:this.state.gameDifficult,theme:e}):n.a.createElement(m,{handleGameStatus:this.handleGameStatus,isRestart:this.state.isRestart,theme:e}),a=document.querySelector("body");return"dark"===this.state.theme?a.style.background="#1D1D1D":a.style.background="#F7F7F7",n.a.createElement("div",{className:"App"},t)}}]),a}(n.a.Component));l.a.render(n.a.createElement(k,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d149d6eb.chunk.js.map